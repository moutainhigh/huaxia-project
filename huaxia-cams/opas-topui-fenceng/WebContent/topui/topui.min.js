__CreateJSPath = function(js) {
	var scripts = document.getElementsByTagName("script");
	var path = "";
	for (var i = 0, l = scripts.length; i < l; i++) {
		var src = scripts[i].src;
		if (src.indexOf(js) != -1) {
			var ss = src.split(js);
			path = ss[0];
			break;
		}
	}
	var href = location.href;
	href = href.split("#")[0];
	href = href.split("?")[0];
	var ss = href.split("/");
	ss.length = ss.length - 1;
	href = ss.join("/");
	if (path.indexOf("https:") == -1 && path.indexOf("http:") == -1
			&& path.indexOf("file:") == -1 && path.indexOf("\/") != 0) {
		path = href + "/" + path;
	}
	return path;
}

var BASEPATH = __CreateJSPath("topui.min.js");

// 业务字典缓存key
var SYS_CACHE_DICT = "_btp_sys_cache_dict";
var SYS_CACHE_DICT_KEY = "_dictStore";

// debugger,此变量用来区别ajax请求是否弹出alert来提示交互错误
topui_debugger = false;

document.write('<script src="' + BASEPATH + 'jquery/default/jquery.min.js" type="text/javascript"></script>');
document.write('<script src="' + BASEPATH + 'framework/framework.cache.js" type="text/javascript"></script>');
document.write('<script src="' + BASEPATH + 'framework/framework.util.js" type="text/javascript"></script>');

function getCookie(sName) {
	var aCookie = document.cookie.split("; ");
	var lastMatch = null;
	for (var i = 0; i < aCookie.length; i++) {
		var aCrumb = aCookie[i].split("=");
		if (sName == aCrumb[0]) {
			lastMatch = aCrumb;
		}
	}
	if (lastMatch) {
		var v = lastMatch[1];
		if (v === undefined)
			return v;
		return unescape(v);
	}
	return null;
}

// 禁用右键
document.oncontextmenu = function() {
	return false;
};
document.onkeydown = function(e) {
	var blnEevntCancel = false;
	// 禁用回退键（文本框回退时不禁用）
	if (window.event.keyCode == 8) {
		if (window.event.srcElement.tagName.toUpperCase() == "TEXTAREA") {
			if (window.event.srcElement.readOnly == true) {
				blnEevntCancel = true;
			} else if (window.event.srcElement.value.length == 0) {
				blnEevntCancel = true;
			}
		} else if (window.event.srcElement.tagName.toUpperCase() == "INPUT"
				&& (event.srcElement.type.toUpperCase() == 'TEXT' || event.srcElement.type
						.toUpperCase() == 'PASSWORD')) {
			if (window.event.srcElement.readOnly == true) {
				blnEevntCancel = true;
			} else if (window.event.srcElement.value.length == 0) {
				blnEevntCancel = true;
			}
		} else {
			blnEevntCancel = true;
		}
	}
	if (blnEevntCancel == true) {
		window.event.cancelBubble = true;
		window.event.returnValue = false;
		return false;
	}
	// 禁用F5
	var ev = window.event || e;
	var code = ev.keyCode || ev.which;
	if (code == 116) {
		ev.keyCode ? ev.keyCode = 0 : ev.which = 0;
		cancelBubble = true;
		return false;
	}
	if (event.altKey && event.keyCode == 49) {// 按 Alt + 1
		parent.imgTab();
	}
	if (event.altKey && event.keyCode == 50) {// 按 Alt + 2
		parent.creTab();
	}
	if (event.altKey && event.keyCode == 75) {// 按 Alt + K
		parent.openKeyWord();
	}
	if (event.altKey && event.keyCode == 67) {// 按 Alt + C
		parent.sub();
	}
	if (event.altKey && event.keyCode == 83) {// 按 Alt + S
		parent.save();
	}
	if (event.altKey && event.keyCode == 53) {// 按 Alt + 5
		parent.basePhoneTab();
	}
	if (event.altKey && event.keyCode == 54) {// 按 Alt + 6
		parent.approvalCall1Tab();
	}
	if (event.altKey && event.keyCode == 51) {// 按 Alt + 3
		parent.approvalCall2Tab();
	}
};